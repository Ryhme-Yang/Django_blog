{% extends "learning_logs/base.html" %}
{% load bootstrap3 %}

{% block header %}
    {% if topic.id == 6 %}
    <script type="text/javascript">
        $(function() {
                    $("#code").addClass("active");
                    });
    </script>
    {% elif topic.id == 7 %}
    <script type="text/javascript">
        $(function() {
                    $("#digital").addClass("active");
                    });
    </script>
    {% elif topic.id == 8 %}
    <script type="text/javascript">
        $(function() {
                    $("#game").addClass("active");
                    });
    </script>
    {% elif topic.id == 9 %}
    <script type="text/javascript">
        $(function() {
                    $("#guala").addClass("active");
                    });
    </script>
    {% endif %}
{% endblock header %}

{% block content %}  

    <p id="delete_entry">
        <a href="{% url 'learning_logs:delete_entry' entry.id %}">åˆ é™¤å†…å®¹</a>
    </p>
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3>
                {{ entry.title }}
            </h3>
            <h3>
                {{ entry.date_added|date:'M d, Y H:i' }}
                <small id="edit_entry">
                    <a href="{% url 'learning_logs:edit_entry' entry.id %}">
                        ç¼–è¾‘å†…å®¹</a>
                </small>
            </h3>
        </div>
        <div class="panel-body">
            <!--{{ entry.text|linebreaks }}--> 
            
            <div id = "content1" style="display:none;">
                {{ entry.text }}
            </div>
            <div id = "content2">
            </div>
            <script type="text/javascript">
                $(function() {
                $("#content2").html($("#content1").text());Â 
                });
            </script>
            
        </div>
    </div><!-- panel -->
    
    {% if hiddenOrNo == 1 %}
    <script type="text/javascript">
        $(function() {
                    $("#edit_entry").addClass("hidden");
                    $("#delete_entry").addClass("hidden");
                    });
    </script>
    {% endif %}
{% endblock content %}

{% block comment %}
    <table class="table table-striped table-bordered">
        <tbody>
            {% for comment in comments %}
                <tr>
                    
                    <td width=15%><p>{{ comment.owner }}</p><p>{{ comment.date_added|date:'M d, Y H:i' }}</p>
                        <p id="{{ comment.id }}delete_comment">
                            <a href="{% url 'learning_logs:delete_comment' comment.id %}">åˆ é™¤è¯„è®º</a>
                        </p>
                    </td>
                    <td width=85%><div id = "{{ comment.id }}"></div></td>
                    <div id = "{{ comment.id }}a" style="display:none;">{{ comment.text }}</div>
                    <script type="text/javascript">
                        $(function() {
                        $("#{{ comment.id }}").html($("#{{ comment.id }}a").text());Â 
                        });
                    </script>
                </tr>
                {% if hiddenOrNo == 1 %}
                    <script type="text/javascript">
                        $(function() {
                                    $("#{{ comment.id }}delete_comment").addClass("hidden");
                                    });
                    </script>
                {% endif %}
            {% empty %}
                <li>è¿™é‡Œè¿˜æ²¡æœ‰å†…å®¹ã€‚</li>
            {% endfor %}
        </tbody>
    </table>

    <form id="form" action="{% url 'learning_logs:entry' topic.id entry.id %}" method='post' class="form">
        {% csrf_token %}
        <div id="div1">
            <p><b>åœ¨æ­¤è¾“å…¥è¯„è®ºå†…å®¹</b></p>
        </div>
        <textarea id="text1" name="text" style="width:0; height:0; visibility:hidden;"></textarea>
        {% buttons %}
            <button name="submit" class="btn btn-primary">æäº¤</button>
        {% endbuttons %}
        <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
        <script type="text/javascript" src="http://unpkg.com/wangeditor/release/wangEditor.min.js"></script>
        <script type="text/javascript">
            var E = window.wangEditor
            var editor = new E('#div1')
            var $text1 = $('#text1')
            editor.customConfig.onchange = function (html) {
                // ç›‘æ§å˜åŒ–ï¼ŒåŒæ­¥æ›´æ–°åˆ° textarea
                $text1.val(html)
            }
            // è‡ªå®šä¹‰èœå•é…ç½®
            editor.customConfig.menus = [
                'bold',  // ç²—ä½“
                'fontSize',  // å­—å·
                'fontName',  // å­—ä½“
                'italic',  // æ–œä½“
                'underline',  // ä¸‹åˆ’çº¿
                'strikeThrough',  // åˆ é™¤çº¿
                'foreColor',  // æ–‡å­—é¢œè‰²
                'backColor',  // èƒŒæ™¯é¢œè‰²
                'emoticon',  // è¡¨æƒ…
                'undo',  // æ’¤é”€
                'redo'  // é‡å¤
            ]

            // è¡¨æƒ…é¢æ¿å¯ä»¥æœ‰å¤šä¸ª tab ï¼Œå› æ­¤è¦é…ç½®æˆä¸€ä¸ªæ•°ç»„ã€‚æ•°ç»„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä¸€ä¸ª tab çš„é…ç½®
            editor.customConfig.emotions = [
                {
                    // tab çš„æ ‡é¢˜
                    title: 'é»˜è®¤',
                    // type -> 'emoji' / 'image'
                    type: 'image',
                    // content -> æ•°ç»„
                    content: [
                        {
                            alt: '[åç¬‘]',
                            src: 'http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/50/pcmoren_huaixiao_org.png'
                        },
                        {
                            alt: '[èˆ”å±]',
                            src: 'http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/pcmoren_tian_org.png'
                        }
                    ]
                },
                {
                    // tab çš„æ ‡é¢˜
                    title: 'emoji',
                    // type -> 'emoji' / 'image'
                    type: 'emoji',
                    // content -> æ•°ç»„
                    content: ['ğŸ˜€', 'ğŸ˜ƒ', 'ğŸ˜„', 'ğŸ˜', 'ğŸ˜†']
                }
            ]

            editor.create()
            // åˆå§‹åŒ– textarea çš„å€¼
            $text1.val(editor.txt.html())
        </script>
    </form>

    
{% endblock comment %}